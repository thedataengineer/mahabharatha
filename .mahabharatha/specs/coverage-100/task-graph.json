{
  "feature": "coverage-100",
  "version": "2.0",
  "generated": "2026-01-27T12:00:00Z",
  "total_tasks": 24,
  "estimated_duration_minutes": 60,
  "max_parallelization": 5,
  "critical_path_minutes": 40,

  "tasks": [
    {
      "id": "COV-001",
      "title": "Create MockMergeCoordinator with full merge flow simulation",
      "description": "Enhance existing MockMergeCoordinator in tests/mocks/mock_merge.py to support prepare_merge, execute_merge, run_gates, finalize_merge, and full_merge_flow methods with configurable outcomes including timeouts, failures, and success scenarios.",
      "phase": "infrastructure",
      "level": 1,
      "dependencies": [],
      "files": {
        "create": [],
        "modify": ["tests/mocks/mock_merge.py"],
        "read": ["mahabharatha/merge.py"]
      },
      "acceptance_criteria": [
        "MockMergeCoordinator supports configure() for timeout/failure simulation",
        "prepare_merge() returns configurable staging branch name",
        "execute_merge() simulates merge with conflict handling",
        "run_pre_merge_gates() returns configurable gate results",
        "full_merge_flow() chains all operations with configurable outcomes"
      ],
      "verification": {
        "command": "python -c \"from tests.mocks.mock_merge import MockMergeCoordinator; m=MockMergeCoordinator(); m.configure(timeout=True); print('OK')\"",
        "timeout_seconds": 30
      },
      "estimate_minutes": 10,
      "critical_path": true
    },
    {
      "id": "COV-002",
      "title": "Create MockStateManager for state.py testing",
      "description": "Create comprehensive mock StateManager in tests/mocks/mock_state.py with worker state, task state, level state, and event tracking simulation capabilities. Support state persistence simulation and edge case handling.",
      "phase": "infrastructure",
      "level": 1,
      "dependencies": [],
      "files": {
        "create": ["tests/mocks/mock_state.py"],
        "modify": [],
        "read": ["mahabharatha/state.py"]
      },
      "acceptance_criteria": [
        "MockStateManager with configurable initial state",
        "Worker state methods (set_worker_state, get_worker_state) with tracking",
        "Task state methods (set_task_status, get_task_status) with tracking",
        "Level state methods with event tracking",
        "State persistence simulation (save/load with configurable failures)"
      ],
      "verification": {
        "command": "python -c \"from tests.mocks.mock_state import MockStateManager; m=MockStateManager('test'); print('OK')\"",
        "timeout_seconds": 30
      },
      "estimate_minutes": 10,
      "critical_path": false
    },
    {
      "id": "COV-003",
      "title": "Enhance test fixtures for orchestrator edge cases",
      "description": "Create tests/fixtures/orchestrator_fixtures.py with fixtures for container launcher failures, worker spawn edge cases, merge timeout scenarios, and level completion with errors.",
      "phase": "infrastructure",
      "level": 1,
      "dependencies": [],
      "files": {
        "create": ["tests/fixtures/orchestrator_fixtures.py"],
        "modify": [],
        "read": ["mahabharatha/orchestrator.py", "mahabharatha/launcher.py"]
      },
      "acceptance_criteria": [
        "Fixture for simulating container launcher failures",
        "Fixture for worker spawn with various error conditions",
        "Fixture for merge timeout scenarios",
        "Fixture for level completion with partial failures",
        "All fixtures are importable and documented"
      ],
      "verification": {
        "command": "python -c \"from tests.fixtures.orchestrator_fixtures import *; print('OK')\"",
        "timeout_seconds": 30
      },
      "estimate_minutes": 10,
      "critical_path": false
    },
    {
      "id": "COV-004",
      "title": "Test MergeFlowResult dataclass methods",
      "description": "Add comprehensive tests for MergeFlowResult.to_dict() in tests/unit/test_merge_flow.py covering all fields including gate_results serialization, timestamp formatting, and None handling.",
      "phase": "merge-coverage",
      "level": 2,
      "dependencies": ["COV-001"],
      "files": {
        "create": ["tests/unit/test_merge_flow.py"],
        "modify": [],
        "read": ["mahabharatha/merge.py", "tests/mocks/mock_merge.py"]
      },
      "acceptance_criteria": [
        "Test MergeFlowResult initialization with all fields",
        "Test to_dict() serializes all fields correctly",
        "Test gate_results list serialization",
        "Test timestamp ISO format conversion",
        "Test with None values for optional fields"
      ],
      "verification": {
        "command": "pytest tests/unit/test_merge_flow.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 8,
      "critical_path": true
    },
    {
      "id": "COV-005",
      "title": "Test MergeCoordinator initialization and prepare_merge",
      "description": "Create tests for MergeCoordinator __init__ with various config options and prepare_merge creating staging branch in tests/unit/test_merge_coordinator_init.py.",
      "phase": "merge-coverage",
      "level": 2,
      "dependencies": ["COV-001"],
      "files": {
        "create": ["tests/unit/test_merge_coordinator_init.py"],
        "modify": [],
        "read": ["mahabharatha/merge.py", "tests/mocks/mock_merge.py"]
      },
      "acceptance_criteria": [
        "Test __init__ with default config",
        "Test __init__ with custom config",
        "Test __init__ with custom repo_path",
        "Test prepare_merge creates correct staging branch name",
        "Test prepare_merge logs creation"
      ],
      "verification": {
        "command": "pytest tests/unit/test_merge_coordinator_init.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 8,
      "critical_path": true
    },
    {
      "id": "COV-006",
      "title": "Test run_pre_merge_gates and gate execution",
      "description": "Create tests for gate execution with pass/fail scenarios, summary generation in tests/unit/test_merge_gates.py.",
      "phase": "merge-coverage",
      "level": 2,
      "dependencies": ["COV-001"],
      "files": {
        "create": ["tests/unit/test_merge_gates.py"],
        "modify": [],
        "read": ["mahabharatha/merge.py", "mahabharatha/gates.py"]
      },
      "acceptance_criteria": [
        "Test run_pre_merge_gates with all gates passing",
        "Test run_pre_merge_gates with some gates failing",
        "Test run_pre_merge_gates with required_only=True",
        "Test gate summary logging",
        "Test with custom working directory"
      ],
      "verification": {
        "command": "pytest tests/unit/test_merge_gates.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 8,
      "critical_path": false
    },
    {
      "id": "COV-007",
      "title": "Test execute_merge with branches and conflicts",
      "description": "Create tests for merging multiple branches, handling MergeConflict exceptions, result generation in tests/unit/test_merge_execute.py.",
      "phase": "merge-coverage",
      "level": 2,
      "dependencies": ["COV-001"],
      "files": {
        "create": ["tests/unit/test_merge_execute.py"],
        "modify": [],
        "read": ["mahabharatha/merge.py", "mahabharatha/exceptions.py"]
      },
      "acceptance_criteria": [
        "Test successful merge of single branch",
        "Test successful merge of multiple branches",
        "Test merge with MergeConflict exception handling",
        "Test MergeResult status values (MERGED, CONFLICT)",
        "Test conflicting_files population on conflict"
      ],
      "verification": {
        "command": "pytest tests/unit/test_merge_execute.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 10,
      "critical_path": true
    },
    {
      "id": "COV-008",
      "title": "Test full_merge_flow and finalize_merge",
      "description": "Create tests for complete merge workflow, finalize to target branch, error handling in tests/unit/test_merge_full_flow.py.",
      "phase": "merge-coverage",
      "level": 2,
      "dependencies": ["COV-001"],
      "files": {
        "create": ["tests/unit/test_merge_full_flow.py"],
        "modify": [],
        "read": ["mahabharatha/merge.py"]
      },
      "acceptance_criteria": [
        "Test full_merge_flow success path",
        "Test full_merge_flow with gate failures",
        "Test full_merge_flow with merge conflicts",
        "Test finalize_merge pushes to target branch",
        "Test MergeFlowResult returned with correct values"
      ],
      "verification": {
        "command": "pytest tests/unit/test_merge_full_flow.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 10,
      "critical_path": true
    },
    {
      "id": "COV-009",
      "title": "Test StateManager load/save edge cases",
      "description": "Create tests for load with missing/corrupt files, save with write errors in tests/unit/test_state_persistence.py.",
      "phase": "state-coverage",
      "level": 3,
      "dependencies": ["COV-002"],
      "files": {
        "create": ["tests/unit/test_state_persistence.py"],
        "modify": [],
        "read": ["mahabharatha/state.py", "tests/mocks/mock_state.py"]
      },
      "acceptance_criteria": [
        "Test load with missing state file (creates new)",
        "Test load with corrupt JSON file",
        "Test save with write permission error",
        "Test save creates backup before overwrite",
        "Test atomic save prevents partial writes"
      ],
      "verification": {
        "command": "pytest tests/unit/test_state_persistence.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 8,
      "critical_path": false
    },
    {
      "id": "COV-010",
      "title": "Test worker state edge cases",
      "description": "Create tests for get_worker_state with invalid IDs, set_worker_state with None in tests/unit/test_state_workers.py.",
      "phase": "state-coverage",
      "level": 3,
      "dependencies": ["COV-002"],
      "files": {
        "create": ["tests/unit/test_state_workers.py"],
        "modify": [],
        "read": ["mahabharatha/state.py"]
      },
      "acceptance_criteria": [
        "Test get_worker_state with non-existent worker ID",
        "Test set_worker_state with None fields",
        "Test worker state update preserves existing fields",
        "Test get_all_workers returns empty when no workers",
        "Test worker state serialization roundtrip"
      ],
      "verification": {
        "command": "pytest tests/unit/test_state_workers.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 8,
      "critical_path": false
    },
    {
      "id": "COV-011",
      "title": "Test task state edge cases",
      "description": "Create tests for task status transitions, get_task_status for missing tasks in tests/unit/test_state_tasks.py.",
      "phase": "state-coverage",
      "level": 3,
      "dependencies": ["COV-002"],
      "files": {
        "create": ["tests/unit/test_state_tasks.py"],
        "modify": [],
        "read": ["mahabharatha/state.py"]
      },
      "acceptance_criteria": [
        "Test get_task_status for non-existent task",
        "Test set_task_status with invalid status transition",
        "Test task claimed_at timestamp handling",
        "Test task duration_ms recording",
        "Test get_tasks_by_status filtering"
      ],
      "verification": {
        "command": "pytest tests/unit/test_state_tasks.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 8,
      "critical_path": false
    },
    {
      "id": "COV-012",
      "title": "Test level state and event tracking",
      "description": "Create tests for level status transitions, event filtering, history truncation in tests/unit/test_state_levels.py.",
      "phase": "state-coverage",
      "level": 3,
      "dependencies": ["COV-002"],
      "files": {
        "create": ["tests/unit/test_state_levels.py"],
        "modify": [],
        "read": ["mahabharatha/state.py"]
      },
      "acceptance_criteria": [
        "Test set_level_status transitions",
        "Test get_events with type filter",
        "Test get_events with time range filter",
        "Test event history truncation (max events)",
        "Test level completion timestamp tracking"
      ],
      "verification": {
        "command": "pytest tests/unit/test_state_levels.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 8,
      "critical_path": false
    },
    {
      "id": "COV-013",
      "title": "Test ContainerLauncher error paths",
      "description": "Create tests for Docker command failures, container health check failures in tests/unit/test_launcher_errors.py.",
      "phase": "launcher-coverage",
      "level": 4,
      "dependencies": ["COV-003"],
      "files": {
        "create": ["tests/unit/test_launcher_errors.py"],
        "modify": [],
        "read": ["mahabharatha/launcher.py", "tests/fixtures/orchestrator_fixtures.py"]
      },
      "acceptance_criteria": [
        "Test spawn with Docker daemon not running",
        "Test spawn with image pull failure",
        "Test health check timeout handling",
        "Test container start failure cleanup",
        "Test resource limit errors"
      ],
      "verification": {
        "command": "pytest tests/unit/test_launcher_errors.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 8,
      "critical_path": false
    },
    {
      "id": "COV-014",
      "title": "Test ContainerLauncher network and cleanup",
      "description": "Create tests for network configuration, container cleanup, resource management in tests/unit/test_launcher_network.py.",
      "phase": "launcher-coverage",
      "level": 4,
      "dependencies": ["COV-003"],
      "files": {
        "create": ["tests/unit/test_launcher_network.py"],
        "modify": [],
        "read": ["mahabharatha/launcher.py"]
      },
      "acceptance_criteria": [
        "Test custom network configuration",
        "Test default bridge network",
        "Test container cleanup on failure",
        "Test cleanup removes container from tracking",
        "Test cleanup handles already-removed containers"
      ],
      "verification": {
        "command": "pytest tests/unit/test_launcher_network.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 8,
      "critical_path": false
    },
    {
      "id": "COV-015",
      "title": "Test ContainerLauncher exec and process verification",
      "description": "Create tests for _exec_worker_entry edge cases, _verify_worker_process timeout in tests/unit/test_launcher_process.py.",
      "phase": "launcher-coverage",
      "level": 4,
      "dependencies": ["COV-003"],
      "files": {
        "create": ["tests/unit/test_launcher_process.py"],
        "modify": [],
        "read": ["mahabharatha/launcher.py"]
      },
      "acceptance_criteria": [
        "Test _exec_worker_entry success path",
        "Test _exec_worker_entry with exec failure",
        "Test _verify_worker_process timeout handling",
        "Test _verify_worker_process process not found",
        "Test _cleanup_failed_container removes resources"
      ],
      "verification": {
        "command": "pytest tests/unit/test_launcher_process.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 8,
      "critical_path": false
    },
    {
      "id": "COV-016",
      "title": "Test Orchestrator container mode initialization",
      "description": "Create tests for container mode setup, image name resolution in tests/unit/test_orchestrator_container_mode.py.",
      "phase": "orchestrator-coverage",
      "level": 4,
      "dependencies": ["COV-003"],
      "files": {
        "create": ["tests/unit/test_orchestrator_container_mode.py"],
        "modify": [],
        "read": ["mahabharatha/orchestrator.py", "tests/fixtures/orchestrator_fixtures.py"]
      },
      "acceptance_criteria": [
        "Test container mode initialization",
        "Test _get_worker_image_name from config",
        "Test _get_worker_image_name default",
        "Test launcher type selection for container mode",
        "Test container launcher configuration"
      ],
      "verification": {
        "command": "pytest tests/unit/test_orchestrator_container_mode.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 8,
      "critical_path": false
    },
    {
      "id": "COV-017",
      "title": "Test Orchestrator merge timeout handling",
      "description": "Create tests for merge timeout with ThreadPoolExecutor, retry logic in tests/unit/test_orchestrator_timeout.py.",
      "phase": "orchestrator-coverage",
      "level": 4,
      "dependencies": ["COV-003"],
      "files": {
        "create": ["tests/unit/test_orchestrator_timeout.py"],
        "modify": [],
        "read": ["mahabharatha/orchestrator.py"]
      },
      "acceptance_criteria": [
        "Test merge timeout triggers retry",
        "Test exponential backoff between retries",
        "Test max retries reached pauses orchestrator",
        "Test successful merge after retry",
        "Test timeout configuration from config"
      ],
      "verification": {
        "command": "pytest tests/unit/test_orchestrator_timeout.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 8,
      "critical_path": false
    },
    {
      "id": "COV-018",
      "title": "Test Orchestrator error recovery paths",
      "description": "Create tests for recoverable error handling, pause/resume with errors in tests/unit/test_orchestrator_recovery.py.",
      "phase": "orchestrator-coverage",
      "level": 4,
      "dependencies": ["COV-003"],
      "files": {
        "create": ["tests/unit/test_orchestrator_recovery.py"],
        "modify": [],
        "read": ["mahabharatha/orchestrator.py"]
      },
      "acceptance_criteria": [
        "Test _set_recoverable_error sets pause state",
        "Test _set_recoverable_error sets error message",
        "Test resume from recoverable error",
        "Test worker respawn after crash",
        "Test worktree cleanup on recovery"
      ],
      "verification": {
        "command": "pytest tests/unit/test_orchestrator_recovery.py -v --tb=short",
        "timeout_seconds": 60
      },
      "estimate_minutes": 8,
      "critical_path": false
    },
    {
      "id": "COV-019",
      "title": "Integration test for complete merge flow",
      "description": "Create integration test for full merge workflow from prepare to finalize with mocked Git operations in tests/integration/test_merge_integration.py.",
      "phase": "integration",
      "level": 5,
      "dependencies": ["COV-004", "COV-005", "COV-006", "COV-007", "COV-008"],
      "files": {
        "create": ["tests/integration/test_merge_integration.py"],
        "modify": [],
        "read": ["mahabharatha/merge.py", "tests/mocks/mock_merge.py"]
      },
      "acceptance_criteria": [
        "Test full merge flow end-to-end",
        "Test merge with gate pass/fail integration",
        "Test merge conflict handling in full flow",
        "Test staging branch creation and cleanup",
        "Test merge result propagation to caller"
      ],
      "verification": {
        "command": "pytest tests/integration/test_merge_integration.py -v --tb=short",
        "timeout_seconds": 120
      },
      "estimate_minutes": 10,
      "critical_path": true
    },
    {
      "id": "COV-020",
      "title": "Integration test for state persistence across sessions",
      "description": "Create integration test for StateManager state persistence and recovery with file system in tests/integration/test_state_integration.py.",
      "phase": "integration",
      "level": 5,
      "dependencies": ["COV-009", "COV-010", "COV-011", "COV-012"],
      "files": {
        "create": ["tests/integration/test_state_integration.py"],
        "modify": [],
        "read": ["mahabharatha/state.py"]
      },
      "acceptance_criteria": [
        "Test state save and load roundtrip",
        "Test state recovery after crash",
        "Test concurrent state access handling",
        "Test state migration between versions",
        "Test state backup and restore"
      ],
      "verification": {
        "command": "pytest tests/integration/test_state_integration.py -v --tb=short",
        "timeout_seconds": 120
      },
      "estimate_minutes": 10,
      "critical_path": false
    },
    {
      "id": "COV-021",
      "title": "Integration test for launcher container lifecycle",
      "description": "Create integration test for ContainerLauncher spawn, monitor, terminate cycle with mocked Docker in tests/integration/test_launcher_integration.py.",
      "phase": "integration",
      "level": 5,
      "dependencies": ["COV-013", "COV-014", "COV-015"],
      "files": {
        "create": ["tests/integration/test_launcher_integration.py"],
        "modify": [],
        "read": ["mahabharatha/launcher.py", "tests/mocks/mock_launcher.py"]
      },
      "acceptance_criteria": [
        "Test spawn to terminate lifecycle",
        "Test multiple worker management",
        "Test worker status transitions",
        "Test cleanup on orchestrator stop",
        "Test resource tracking accuracy"
      ],
      "verification": {
        "command": "pytest tests/integration/test_launcher_integration.py -v --tb=short",
        "timeout_seconds": 120
      },
      "estimate_minutes": 10,
      "critical_path": false
    },
    {
      "id": "COV-022",
      "title": "Integration test for orchestrator with failures",
      "description": "Create integration test for Orchestrator handling merge failures, worker crashes, recovery in tests/integration/test_orchestrator_integration.py.",
      "phase": "integration",
      "level": 5,
      "dependencies": ["COV-016", "COV-017", "COV-018"],
      "files": {
        "create": ["tests/integration/test_orchestrator_integration.py"],
        "modify": [],
        "read": ["mahabharatha/orchestrator.py"]
      },
      "acceptance_criteria": [
        "Test orchestrator recovery from worker crash",
        "Test orchestrator pause on merge failure",
        "Test orchestrator resume after fix",
        "Test level advancement after recovery",
        "Test metrics collection through failures"
      ],
      "verification": {
        "command": "pytest tests/integration/test_orchestrator_integration.py -v --tb=short",
        "timeout_seconds": 120
      },
      "estimate_minutes": 10,
      "critical_path": false
    },
    {
      "id": "COV-023",
      "title": "Run full coverage report and verify 95%+",
      "description": "Execute comprehensive test suite with coverage and verify all core modules at 95%+ coverage.",
      "phase": "verification",
      "level": 6,
      "dependencies": ["COV-019", "COV-020", "COV-021", "COV-022"],
      "files": {
        "create": [],
        "modify": [],
        "read": []
      },
      "acceptance_criteria": [
        "All unit tests pass",
        "All integration tests pass",
        "merge.py coverage >= 95%",
        "state.py coverage >= 95%",
        "launcher.py coverage >= 95%",
        "orchestrator.py coverage >= 95%"
      ],
      "verification": {
        "command": "pytest tests/unit/ tests/integration/ --cov=mahabharatha.merge --cov=mahabharatha.state --cov=mahabharatha.launcher --cov=mahabharatha.orchestrator --cov-fail-under=95 -q",
        "timeout_seconds": 300
      },
      "estimate_minutes": 5,
      "critical_path": true
    },
    {
      "id": "COV-024",
      "title": "Generate coverage HTML report",
      "description": "Generate HTML coverage report for documentation purposes.",
      "phase": "verification",
      "level": 7,
      "dependencies": ["COV-023"],
      "files": {
        "create": [],
        "modify": [],
        "read": []
      },
      "acceptance_criteria": [
        "HTML coverage report generated in htmlcov/",
        "Report shows line-by-line coverage",
        "All modules included in report"
      ],
      "verification": {
        "command": "pytest tests/unit/ --cov=mahabharatha --cov-report=html -q && test -f htmlcov/index.html && echo 'HTML report generated'",
        "timeout_seconds": 300
      },
      "estimate_minutes": 5,
      "critical_path": false
    }
  ]
}

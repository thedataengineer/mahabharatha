{
  "feature": "phase-2-ci-quality",
  "version": "2.0",
  "generated": "2026-02-07",
  "total_tasks": 8,
  "estimated_duration_minutes": 35,
  "max_parallelization": 4,

  "tasks": [
    {
      "id": "TASK-001",
      "title": "Create CodeQL security scanning workflow",
      "description": "Create .github/workflows/codeql.yml with Python language analysis using security-and-quality query suite. Triggers: push to main, PRs to main, weekly schedule (Monday 9:00 UTC). Advisory only — not a required check. Use actions/checkout@v4, github/codeql-action/init@v3, github/codeql-action/autobuild@v3, github/codeql-action/analyze@v3.",
      "phase": "foundation",
      "level": 1,
      "dependencies": [],
      "files": {
        "create": [".github/workflows/codeql.yml"],
        "modify": [],
        "read": [".github/workflows/ci.yml"]
      },
      "verification": {
        "command": "python -c \"import yaml, sys; yaml.safe_load(open('.github/workflows/codeql.yml')); print('Valid YAML')\"",
        "timeout_seconds": 30
      },
      "estimate_minutes": 8,
      "skills_required": ["github-actions", "codeql"],
      "consumers": [],
      "integration_test": null,
      "context": "## Spec Context\nFR-001: CodeQL security scanning workflow — Python, security-and-quality suite, push + PR + weekly schedule.\nBusiness rule: CodeQL must scan on push to main, PRs, and weekly cron.\nQ-001 resolved: Advisory only (don't add to required checks initially).\nNFR: CodeQL scan should complete within 10 minutes.\n\n## Reference\nUse codeql-action v3. Language: python. Query suite: security-and-quality."
    },
    {
      "id": "TASK-002",
      "title": "Create CODEOWNERS file",
      "description": "Create CODEOWNERS file at repo root. Default owner: @rocklambros for all files (*). Specific paths: /zerg/ for core orchestrator, /.github/ for CI/CD, /docs/ for documentation. Follow GitHub CODEOWNERS syntax.",
      "phase": "foundation",
      "level": 1,
      "dependencies": [],
      "files": {
        "create": ["CODEOWNERS"],
        "modify": [],
        "read": []
      },
      "verification": {
        "command": "test -f CODEOWNERS && grep -q '@rocklambros' CODEOWNERS && echo 'CODEOWNERS valid'",
        "timeout_seconds": 10
      },
      "estimate_minutes": 3,
      "skills_required": ["github"],
      "consumers": [],
      "integration_test": null,
      "context": "## Spec Context\nFR-004: CODEOWNERS file — Default @rocklambros, specific paths for core, CI, docs.\nBusiness rule: CODEOWNERS uses @rocklambros as default owner."
    },
    {
      "id": "TASK-003",
      "title": "Create MkDocs configuration and docs landing page",
      "description": "Create mkdocs.yml with Material theme, navigation tabs, search plugin, and nav structure covering all existing docs/ files (commands-quick.md, commands-deep.md, configuration.md, context-engineering.md, design-principles.md, plugins.md, tutorial-minerals-store.md, commands/create-command.md). Create docs/index.md as the landing page — adapt key sections from README.md (overview, quick start, key concepts) with links to other docs pages. Do NOT copy README verbatim — write a proper docs landing page.",
      "phase": "foundation",
      "level": 1,
      "dependencies": [],
      "files": {
        "create": ["mkdocs.yml", "docs/index.md"],
        "modify": [],
        "read": ["README.md", "docs/commands-quick.md", "docs/commands-deep.md", "docs/configuration.md", "docs/context-engineering.md", "docs/design-principles.md", "docs/plugins.md", "docs/tutorial-minerals-store.md"]
      },
      "verification": {
        "command": "pip install mkdocs-material >/dev/null 2>&1 && mkdocs build --strict --clean 2>&1 | tail -5",
        "timeout_seconds": 120
      },
      "estimate_minutes": 15,
      "skills_required": ["mkdocs", "markdown"],
      "consumers": ["TASK-006"],
      "integration_test": null,
      "context": "## Spec Context\nFR-005: mkdocs.yml config — Material theme, navigation tabs, search.\nFR-006: docs/index.md — Landing page for docs site (can adapt from README).\nFR-010: mkdocs + mkdocs-material in optional deps (handled by TASK-004).\nBusiness rule: Docs site uses Material for MkDocs theme.\nConstraint: Docs site must build from existing docs/ content without major rewrites.\n\n## Existing docs files\n- commands-quick.md: Quick reference for commands\n- commands-deep.md: Detailed command guide\n- configuration.md: Config file reference\n- context-engineering.md: Token optimization docs\n- design-principles.md: Architecture principles\n- plugins.md: Plugin system docs\n- tutorial-minerals-store.md: Tutorial walkthrough\n- commands/create-command.md: Command creation guide"
    },
    {
      "id": "TASK-004",
      "title": "Update pyproject.toml with Python 3.13 classifier and docs deps",
      "description": "Modify pyproject.toml: (1) Add 'Programming Language :: Python :: 3.13' to classifiers list. (2) Add docs optional dependency group: docs = ['mkdocs>=1.6', 'mkdocs-material>=9.5']. (3) Update 'all' extras to include docs: all = ['zerg-ai[dev]', 'zerg-ai[metrics]', 'zerg-ai[performance]', 'zerg-ai[docs]']. Do NOT change any other settings.",
      "phase": "foundation",
      "level": 1,
      "dependencies": [],
      "files": {
        "create": [],
        "modify": ["pyproject.toml"],
        "read": []
      },
      "verification": {
        "command": "python -c \"import tomllib; d=tomllib.load(open('pyproject.toml','rb')); assert '3.13' in str(d['project']['classifiers']); assert 'docs' in d['project']['optional-dependencies']; print('pyproject.toml valid')\"",
        "timeout_seconds": 30
      },
      "estimate_minutes": 5,
      "skills_required": ["python-packaging"],
      "consumers": ["TASK-005"],
      "integration_test": null,
      "context": "## Spec Context\nFR-003: Python 3.12 + 3.13 test matrix — update pyproject.toml classifiers.\nFR-010: mkdocs + mkdocs-material in optional deps — [project.optional-dependencies.docs].\n\n## Current state\nClassifiers already include Python :: 3.12. Optional deps: dev, metrics, performance, all.\nAdd Python :: 3.13 classifier and docs = ['mkdocs>=1.6', 'mkdocs-material>=9.5']."
    },
    {
      "id": "TASK-005",
      "title": "Add mypy to CI and expand Python test matrix",
      "description": "Modify .github/workflows/ci.yml: (1) Add 'mypy zerg/' step to quality job after lint check and before validate commands. (2) Expand test job matrix to include python-version: ['3.12', '3.13'] alongside existing shard: [1, 2], producing 4 test jobs. Update setup-python to use matrix.python-version. Keep quality, smoke, and audit jobs on Python 3.12. Must not break existing 5 required checks (quality, smoke, test (1), test (2), audit). Note: test job names will change to 'test (3.12, 1)', 'test (3.12, 2)', 'test (3.13, 1)', 'test (3.13, 2)' — this requires updating branch protection required checks.",
      "phase": "integration",
      "level": 2,
      "dependencies": ["TASK-004"],
      "files": {
        "create": [],
        "modify": [".github/workflows/ci.yml"],
        "read": ["pyproject.toml"]
      },
      "verification": {
        "command": "python -c \"import yaml; d=yaml.safe_load(open('.github/workflows/ci.yml')); m=d['jobs']['test']['strategy']['matrix']; assert '3.13' in [str(v) for v in m['python-version']]; print('CI matrix valid')\" && grep -q 'mypy' .github/workflows/ci.yml && echo 'mypy step present'",
        "timeout_seconds": 30
      },
      "estimate_minutes": 12,
      "skills_required": ["github-actions", "ci-cd"],
      "consumers": [],
      "integration_test": null,
      "context": "## Spec Context\nFR-002: mypy in CI quality job — Use existing pyproject.toml config, block merge on failure.\nFR-003: Python 3.12 + 3.13 test matrix — Add 3.13 to matrix.\nBusiness rule: mypy failure must block merge (required check).\nBusiness rule: Python 3.13 tests use same test suite — no special handling.\nConstraint: Must not break existing 5 required CI checks.\nNFR: Adding mypy should add <60s to CI.\n\n## Current ci.yml structure\n- quality: lint → validate_commands → changelog check (Python 3.12)\n- smoke: depends on quality (Python 3.12)\n- test: depends on smoke, matrix shard [1, 2] (Python 3.12)\n- audit: independent (Python 3.12)\n\n## Dependencies\nTASK-004 adds Python 3.13 classifier to pyproject.toml."
    },
    {
      "id": "TASK-006",
      "title": "Create GitHub Pages docs deployment workflow",
      "description": "Create .github/workflows/docs.yml: Trigger on push to main when docs/** or mkdocs.yml change. Steps: checkout, setup-python 3.12, pip install mkdocs-material, mkdocs build --strict, deploy to GitHub Pages using actions/upload-pages-artifact and actions/deploy-pages. Add permissions for pages deployment (pages: write, id-token: write). Use concurrency group to prevent concurrent deploys.",
      "phase": "integration",
      "level": 2,
      "dependencies": ["TASK-003"],
      "files": {
        "create": [".github/workflows/docs.yml"],
        "modify": [],
        "read": ["mkdocs.yml"]
      },
      "verification": {
        "command": "python -c \"import yaml; d=yaml.safe_load(open('.github/workflows/docs.yml')); assert 'deploy' in d['jobs'] or 'build' in d['jobs']; print('docs.yml valid')\"",
        "timeout_seconds": 30
      },
      "estimate_minutes": 10,
      "skills_required": ["github-actions", "github-pages"],
      "consumers": [],
      "integration_test": null,
      "context": "## Spec Context\nFR-007: GitHub Pages deployment workflow — .github/workflows/docs.yml, deploy on push to main.\nNFR: Docs build should complete within 2 minutes.\nNFR: Docs deployment should not block CI (separate workflow).\n\n## Dependencies\nTASK-003 creates mkdocs.yml and docs/index.md. This workflow builds and deploys the site."
    },
    {
      "id": "TASK-007",
      "title": "Update README with Discussions link and coverage badge",
      "description": "Modify README.md: (1) Add coverage badge after the CI badge in the badges section: shields.io badge pointing to codecov or a static badge. Use a static 50% badge for now since no coverage service is integrated: https://img.shields.io/badge/coverage-50%25-yellow. (2) Add a Discussions link row to the Documentation table: '| [Discussions](https://github.com/rocklambros/zerg/discussions) | Questions, ideas, and community chat |'. Keep all existing content unchanged.",
      "phase": "integration",
      "level": 2,
      "dependencies": [],
      "files": {
        "create": [],
        "modify": ["README.md"],
        "read": []
      },
      "verification": {
        "command": "grep -q 'coverage' README.md && grep -q 'discussions' README.md && echo 'README updates valid'",
        "timeout_seconds": 10
      },
      "estimate_minutes": 5,
      "skills_required": ["markdown"],
      "consumers": [],
      "integration_test": null,
      "context": "## Spec Context\nFR-009: README Discussions link — Add link in README.\nFR-011: Coverage badge in README — shields.io coverage badge (Should priority).\n\n## Current README badge section (lines 8-12)\n4 badges: PyPI version, Python, License, CI. Add coverage badge after CI."
    },
    {
      "id": "TASK-008",
      "title": "Update CHANGELOG with Phase 2 entries",
      "description": "Modify CHANGELOG.md: Add Phase 2 entries under the existing [Unreleased] → Added section. Entries to add:\n- CodeQL security scanning workflow for automated vulnerability detection on PRs and weekly schedule (#189)\n- mypy type checking enforced in CI quality job (#189)\n- Python 3.13 added to CI test matrix alongside 3.12 (#189)\n- CODEOWNERS file with @rocklambros as default reviewer (#189)\n- MkDocs documentation site with Material theme and GitHub Pages deployment (#190)\n- `docs` optional dependency group for mkdocs and mkdocs-material (#190)\n- Python 3.13 classifier in pyproject.toml (#189)\n- Coverage badge and GitHub Discussions link in README (#189, #190)\n\nPlace these entries AFTER the existing Phase 1 entries under [Unreleased] → Added.",
      "phase": "quality",
      "level": 3,
      "dependencies": ["TASK-001", "TASK-002", "TASK-003", "TASK-004", "TASK-005", "TASK-006", "TASK-007"],
      "files": {
        "create": [],
        "modify": ["CHANGELOG.md"],
        "read": []
      },
      "verification": {
        "command": "grep -q 'CodeQL' CHANGELOG.md && grep -q 'mypy' CHANGELOG.md && grep -q 'MkDocs' CHANGELOG.md && grep -q '3.13' CHANGELOG.md && echo 'CHANGELOG valid'",
        "timeout_seconds": 10
      },
      "estimate_minutes": 5,
      "skills_required": ["changelog"],
      "consumers": [],
      "integration_test": null,
      "context": "## Spec Context\nCHANGELOG.md update is ALWAYS required. Add entries under [Unreleased] → Added section.\nAll changes are 'Added' category. Reference issues #189 and #190."
    }
  ],

  "levels": {
    "1": {
      "name": "foundation",
      "tasks": ["TASK-001", "TASK-002", "TASK-003", "TASK-004"],
      "parallel": true,
      "estimated_minutes": 15,
      "depends_on_levels": []
    },
    "2": {
      "name": "integration",
      "tasks": ["TASK-005", "TASK-006", "TASK-007"],
      "parallel": true,
      "estimated_minutes": 12,
      "depends_on_levels": [1]
    },
    "3": {
      "name": "quality",
      "tasks": ["TASK-008"],
      "parallel": false,
      "estimated_minutes": 5,
      "depends_on_levels": [2]
    }
  },

  "conflict_matrix": {
    "description": "No file conflicts — each file is owned by exactly one task",
    "conflicts": []
  }
}
